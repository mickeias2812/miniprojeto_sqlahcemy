{% extends 'base.html' %}
{% block title %}{{ 'Editar' if livro else 'Adicionar' }} Livro{% endblock %}
{% block content %}
<h2 class="ui header">{{ 'Editar' if livro else 'Adicionar' }} Livro</h2>
<form class="ui form" method="POST">
    <div class="field">
        <label>Título</label>
        <input type="text" name="titulo" value="{{ livro.Titulo if livro else '' }}" required>
    </div>
    <div class="field">
        <label>Autor</label>
        <select name="autor_id" required>
            <option value="">Selecione um autor</option>
            {% for autor in autores %}
            <option value="{{ autor.ID_autor }}" {% if livro and livro.Autor_id == autor.ID_autor %}selected{% endif %}>
                {{ autor.Nome_autor }}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="field">
        <label>ISBN</label>
        <input type="text" name="isbn" value="{{ livro.ISBN if livro else '' }}" required>
    </div>
    <div class="field">
        <label>Ano de Publicação</label>
        <input type="number" name="ano" value="{{ livro.Ano_publicacao if livro else '' }}">
    </div>
    <div class="field">
        <label>Gênero</label>
        <select name="genero_id" required>
            <option value="">Selecione um gênero</option>
            {% for genero in generos %}
            <option value="{{ genero.ID_genero }}" {% if livro and livro.Genero_id == genero.ID_genero %}selected{% endif %}>
                {{ genero.Nome_genero }}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="field">
        <label>Editora</label>
        <select name="editora_id" required>
            <option value="">Selecione uma editora</option>
            {% for editora in editoras %}
            <option value="{{ editora.ID_editora }}" {% if livro and livro.Editora_id == editora.ID_editora %}selected{% endif %}>
                {{ editora.Nome_editora }}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="field">
        <label>Quantidade Disponível</label>
        <input type="number" name="quantidade" value="{{ livro.Quantidade_disponivel if livro else '' }}">
    </div>
    <div class="field">
        <label>Resumo</label>
        <textarea name="resumo">{{ livro.Resumo if livro else '' }}</textarea>
    </div>
    <button class="ui green button" type="submit">Salvar</button>
    <a class="ui grey button" href="{{ url_for('listar_livros') }}">Cancelar</a>
</form>
{% endblock %}
